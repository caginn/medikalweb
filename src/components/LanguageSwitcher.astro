---
import { getRelativeLocaleUrl } from "astro:i18n";

const locales = ["tr", "en"];
const pathname = Astro.url.pathname;

// Get current locale from path
const pathParts = pathname.split('/').filter(Boolean);
const currentLocale = locales.includes(pathParts[0]) ? pathParts[0] : "tr";

// Remove locale prefix to get the page path
const pathWithoutLocale = pathname.replace(/^\/(en|tr)(?=\/|$)/, "");
const cleanPath = pathWithoutLocale === "" ? "/" : pathWithoutLocale;
---

<div class="flex items-center bg-gray-100 rounded-full p-1 text-sm font-medium">
  {locales.map((loc) => (
    <a
      href={getRelativeLocaleUrl(loc, cleanPath)}
      class:list={[
        "px-3 py-1 rounded-full transition-all",
        loc === currentLocale 
          ? "bg-white text-gray-900 shadow" 
          : "text-gray-700 hover:text-accent"
      ]}
      aria-current={loc === currentLocale ? "page" : undefined}
    >
      {loc.toUpperCase()}
    </a>
  ))}
</div>
